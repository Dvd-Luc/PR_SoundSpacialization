"use strict";(self["webpackChunkpr_spacialization"]=self["webpackChunkpr_spacialization"]||[]).push([[203],{1203:(o,n,t)=>{t.r(n),t.d(n,{default:()=>io});var i=t(3673),e=t(2323);const a={class:"boombox-body"},s={class:"bb-front"},l=(0,i._)("section",{class:"master-controls"},[(0,i._)("input",{type:"range",id:"volume",class:"control-volume",min:"0",max:"2",value:"1",list:"gain-vals",step:"0.01","data-action":"volume"}),(0,i._)("datalist",{id:"gain-vals"},[(0,i._)("option",{value:"0",label:"min"}),(0,i._)("option",{value:"2",label:"max"})]),(0,i._)("label",{for:"volume"},"VOL")],-1),r={class:"tape"},u={ref:"audioPlayer",src:"https://s3-us-west-2.amazonaws.com/s.cdpn.io/858/outfoxing.mp3",crossorigin:"anonymous"},d=(0,i._)("span",null,"Play/Pause",-1),c=(0,i._)("div",{class:"bb-top"},null,-1),p=(0,i._)("div",{class:"bb-right"},null,-1),b=(0,i._)("div",{class:"bb-bottom"},null,-1),h=(0,i._)("div",{class:"bb-left"},null,-1),m=(0,i._)("div",{class:"bb-back"},null,-1),w=(0,i._)("div",{id:"show position","aria-labelledby":"move-boombox"},null,-1),g={id:"position-controls","aria-labelledby":"get-position-boombox"},v=(0,i._)("h3",{id:"get-position-boombox"},"Get Position",-1),k={class:"get-position_xy"},B={class:"row q-col-gutter-sm"},_={class:"column"},f=(0,i.Uk)(" Horizontal Bounds "),x={class:"column"},y=(0,i.Uk)(" Vertical Bounds "),C={class:"column"},Z=(0,i.Uk)(" Depth Bounds "),S={id:"move-controls","aria-labelledby":"move-boombox"},Y=(0,i._)("h3",{id:"move-boombox"},"Move Boombox",-1),X=(0,i._)("span",null,"Left",-1),P=(0,i._)("span",null,"Right",-1),M=(0,i._)("span",null,"Up",-1),z=(0,i._)("span",null,"Down",-1),L=(0,i._)("span",null,"Backward",-1),W=(0,i._)("span",null,"Forward",-1);function q(o,n,t,q,O,V){const D=(0,i.up)("q-btn"),U=(0,i.up)("q-input"),G=(0,i.up)("Localisation"),E=(0,i.up)("q-page");return(0,i.wg)(),(0,i.j4)(E,null,{default:(0,i.w5)((()=>[(0,i._)("div",a,[(0,i._)("div",s,[l,(0,i._)("section",r,[(0,i._)("audio",u,null,512),(0,i.Wm)(D,{onClick:n[0]||(n[0]=o=>V.playMusic()),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[d])),_:1})])]),c,p,b,h,m]),w,(0,i._)("div",g,[v,(0,i._)("section",k,[(0,i._)("div",B,[(0,i._)("div",_,[(0,i.Wm)(U,{standout:"",modelValue:O.pannerSettings.positionX,"onUpdate:modelValue":n[1]||(n[1]=o=>O.pannerSettings.positionX=o),onChange:n[2]||(n[2]=o=>V.updatePanner("X",O.pannerSettings.positionX)),label:"Source X Position"},null,8,["modelValue"]),(0,i._)("div",null,[f,(0,i._)("li",null,(0,e.zw)(O.bounds.leftBound),1),(0,i._)("li",null,(0,e.zw)(O.bounds.rightBound),1)])]),(0,i._)("div",x,[(0,i.Wm)(U,{standout:"",modelValue:O.pannerSettings.positionY,"onUpdate:modelValue":n[3]||(n[3]=o=>O.pannerSettings.positionY=o),onChange:n[4]||(n[4]=o=>V.updatePanner("Y",O.pannerSettings.positionY)),label:"Source Y Position"},null,8,["modelValue"]),(0,i._)("div",null,[y,(0,i._)("li",null,(0,e.zw)(O.bounds.bottomBound),1),(0,i._)("li",null,(0,e.zw)(O.bounds.topBound),1)])]),(0,i._)("div",C,[(0,i.Wm)(U,{standout:"",modelValue:O.pannerSettings.positionZ,"onUpdate:modelValue":n[5]||(n[5]=o=>O.pannerSettings.positionZ=o),onChange:n[6]||(n[6]=o=>V.updatePanner("Z",O.pannerSettings.positionZ)),label:"Source Z Position"},null,8,["modelValue"]),(0,i._)("div",null,[Z,(0,i._)("li",null,(0,e.zw)(O.bounds.backwardBound),1),(0,i._)("li",null,(0,e.zw)(O.bounds.forwardBound),1)])])])])]),(0,i._)("div",S,[Y,(0,i.Wm)(D,{onClick:n[7]||(n[7]=o=>V.moveBoombox("left")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[X])),_:1}),(0,i.Wm)(D,{onClick:n[8]||(n[8]=o=>V.moveBoombox("right")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[P])),_:1}),(0,i.Wm)(D,{onClick:n[9]||(n[9]=o=>V.moveBoombox("up")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[M])),_:1}),(0,i.Wm)(D,{onClick:n[10]||(n[10]=o=>V.moveBoombox("down")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[z])),_:1}),(0,i.Wm)(D,{onClick:n[11]||(n[11]=o=>V.moveBoombox("backward")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[L])),_:1}),(0,i.Wm)(D,{onClick:n[12]||(n[12]=o=>V.moveBoombox("forward")),color:"white","text-color":"black"},{default:(0,i.w5)((()=>[W])),_:1})]),(0,i.Wm)(G)])),_:1})}t(71);const O={id:"app"},V=(0,i.Uk)(" Let us locate you for better results... "),D={key:0},U={key:1},G=(0,i._)("i",null,"Getting your location...",-1),E=[G],N={key:2},H={key:3};function Q(o,n,t,a,s,l){return(0,i.wg)(),(0,i.iD)("div",O,[(0,i._)("p",null,[V,(0,i._)("button",{onClick:n[0]||(n[0]=(...o)=>l.locateMe&&l.locateMe(...o))},"Get location"),(0,i._)("button",{onClick:n[1]||(n[1]=(...o)=>l.orientateMe&&l.orientateMe(...o))},"Get Orientation")]),o.errorStr?((0,i.wg)(),(0,i.iD)("div",D," Sorry, but the following error occurred: "+(0,e.zw)(o.errorStr),1)):(0,i.kq)("",!0),o.gettingLocation?((0,i.wg)(),(0,i.iD)("div",U,E)):(0,i.kq)("",!0),o.location?((0,i.wg)(),(0,i.iD)("div",N," Your location data is "+(0,e.zw)(o.location.coords.latitude)+", "+(0,e.zw)(o.location.coords.longitude),1)):(0,i.kq)("",!0),o.orientation?((0,i.wg)(),(0,i.iD)("div",H,"Your orientation data is "+(0,e.zw)(l.dispOrientation),1)):(0,i.kq)("",!0)])}t(6701);const $={name:"Localisation",data:function(){return{location:null,orientation:null,gettingLocation:!1,errorStr:null}},mounted:()=>{console.log("huhuhuhu")},computed:{dispOrientation(){return this.orientation}},methods:{async getLocation(){return new Promise(((o,n)=>{"geolocation"in navigator||n(new Error("Geolocation is not available.")),navigator.geolocation.getCurrentPosition((n=>{o(n)}),(o=>{n(o)}))}))},async getOrientation(){if(!window.DeviceOrientationEvent)throw console.log("Orientation not available"),new Error("Orientation not available on this device");window.addEventListener("deviceorientation",(o=>{console.log("z : "+o.alpha+"\n x : "+o.beta+"\n y : "+o.gamma+"\n abs"+o.absolute),this.orientation=Math.random()}))},async locateMe(){this.gettingLocation=!0;try{this.gettingLocation=!1,this.location=await this.getLocation()}catch(o){this.gettingLocation=!1,this.errorStr=o.message}},async orientateMe(){try{this.orientation=await this.getOrientation(),console.log(this.orientation)}catch(o){this.errorStr=o.message}}}};var A=t(4260);const F=(0,A.Z)($,[["render",Q]]),R=F,j={name:"Boombox",data(){return{audioCtx:null,listener:null,track:null,gainNode:null,position:{X:0,Y:0,Z:0},pannerSettings:{pannerModel:"HRTF",innerCone:360,outerCone:0,outerGain:0,distanceModel:"inverse",maxDistance:1e4,refDistance:1,rollOff:1,positionX:0,positionY:0,positionZ:0,orientationX:1,orientationY:0,orientationZ:0},panner:null,bounds:{topBound:window.innerHeight/2,bottomBound:-window.innerHeight/2,rightBound:window.innerWidth/2,leftBound:-window.innerWidth/2,forwardBound:500,backwardBound:-500}}},components:{Localisation:R},methods:{init(){console.log("init method"),this.listener.positionX?(this.listener.positionX.value=this.position.X,this.listener.positionY.value=this.position.Y,this.listener.positionZ.value=this.position.Z-12):this.listener.setPosition(this.position.X,this.position.Y,this.position.Z-12),this.listener.setOrientation(0,0,-1,0,1,0),console.log(this.listener),this.panner=new PannerNode(this.audioCtx,this.pannerSettings),console.log(this.panner),this.track=this.audioCtx.createMediaElementSource(this.$refs.audioPlayer);const o=this.audioCtx.createGain(),n=document.querySelector('[data-action="volume"]');n.addEventListener("input",(function(){o.gain.value=this.value}),!1),this.track.connect(o).connect(this.panner).connect(this.audioCtx.destination)},moveBoombox(o){const n=(this.bounds.rightBound-this.bounds.leftBound)/100,t=(this.bounds.topBound-this.bounds.bottomBound)/100,i=(this.bounds.forwardBound-this.bounds.backwardBound)/100;switch(o){case"left":this.panner.positionX.value>this.bounds.leftBound&&(this.panner.positionX.value-=n);break;case"up":this.panner.positionY.value<this.bounds.topBound&&(this.panner.positionY.value+=t),console.log(this.panner.positionY.value);break;case"right":this.panner.positionX.value<this.bounds.rightBound&&(this.panner.positionX.value+=n);break;case"down":this.panner.positionY.value>this.bounds.bottomBound&&(this.panner.positionY.value-=t);break;case"backward":this.panner.positionZ.value>this.bounds.backwardBound&&(this.panner.positionZ.value-=i);break;case"forward":this.panner.positionZ.value<this.bounds.forwardBound&&(this.panner.positionZ.value+=i);break}},moveBoomboxAxis(o,n){if(isNaN(n))console.log("Not a number on axis "+o);else switch(o){case"X":n<=bounds.rightBound&&n>=bounds.leftBound?panner.positionX.value=n:panner.positionX.value=Math.abs(bounds.rightBound-n)>Math.abs(bounds.leftBound-n)?bounds.leftBound:bounds.rightBound;break;case"Y":n<=bounds.topBound&&n>=bounds.bottomBound?panner.positionY.value=n:panner.positionY.value=Math.abs(bounds.topBound-n)>Math.abs(bounds.bottomBound-n)?bounds.bottomBound:bounds.topBound;break;case"Z":n<=bounds.forwardBound&&n>=bounds.backwardBound?panner.positionZ.value=n:panner.positionZ.value=Math.abs(bounds.forwardBound-n)>Math.abs(bounds.backwardBound-n)?bounds.backwardBound:bounds.forwardBound;break}},updatePanner(o,n){switch(console.log("updatePanner"),console.log(this.position.X),console.log(o),console.log(n),o){case"X":this.panner.positionX.value=n;break;case"Y":this.panner.positionY.value=n;break;case"Z":this.panner.positionZ.value=n;break}console.log(this.panner),console.log(this.listener)},async playMusic(){if(!this.audioCtx){const o=window.AudioContext||window.webkitAudioContext;console.log(this.listener),this.audioCtx=new o,this.listener=this.audioCtx.listener,this.init()}"running"===this.audioCtx.state?this.$refs.audioPlayer.paused?this.$refs.audioPlayer.play():this.$refs.audioPlayer.pause():console.error("audio context down"),"suspended"===this.audioCtx.state&&this.audioCtx.resume()}}};document.querySelector("audio"),document.querySelector(".tape-controls-play");var I=t(4379),T=t(8902),J=t(7435),K=t(8786),oo=t(7518),no=t.n(oo);const to=(0,A.Z)(j,[["render",q]]),io=to;no()(j,"components",{QPage:I.Z,QSlider:T.Z,QBtn:J.Z,QInput:K.Z})}}]);